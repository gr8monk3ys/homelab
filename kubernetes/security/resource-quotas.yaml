---
# =============================================================================
# ResourceQuotas - Prevent resource exhaustion attacks
# =============================================================================
# These quotas limit total resource consumption per namespace to prevent
# any single namespace from consuming all cluster resources.

# -----------------------------------------------------------------------------
# Critical Services - Higher limits for essential infrastructure
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: monitoring
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "20"
    requests.storage: 200Gi
    pods: "50"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: argocd
spec:
  hard:
    requests.cpu: "2"
    requests.memory: 4Gi
    limits.cpu: "4"
    limits.memory: 8Gi
    persistentvolumeclaims: "5"
    requests.storage: 20Gi
    pods: "20"

# -----------------------------------------------------------------------------
# Security Services - Moderate limits
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: vaultwarden
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "2"
    requests.storage: 10Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: authelia
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 1Gi
    limits.cpu: "1"
    limits.memory: 2Gi
    persistentvolumeclaims: "3"
    requests.storage: 5Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: crowdsec
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "2"
    requests.storage: 5Gi
    pods: "5"

# -----------------------------------------------------------------------------
# Core Services - Standard limits
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: nextcloud
spec:
  hard:
    requests.cpu: "1"
    requests.memory: 2Gi
    limits.cpu: "2"
    limits.memory: 4Gi
    persistentvolumeclaims: "5"
    requests.storage: 200Gi
    pods: "10"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: gitea
spec:
  hard:
    requests.cpu: "1"
    requests.memory: 1Gi
    limits.cpu: "2"
    limits.memory: 2Gi
    persistentvolumeclaims: "5"
    requests.storage: 50Gi
    pods: "10"

# -----------------------------------------------------------------------------
# Media Services - Higher storage limits
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: jellyfin
spec:
  hard:
    requests.cpu: "2"
    requests.memory: 2Gi
    limits.cpu: "4"
    limits.memory: 8Gi
    persistentvolumeclaims: "5"
    requests.storage: 500Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: arr-stack
spec:
  hard:
    requests.cpu: "2"
    requests.memory: 2Gi
    limits.cpu: "4"
    limits.memory: 4Gi
    persistentvolumeclaims: "10"
    requests.storage: 100Gi
    pods: "15"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: audiobookshelf
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 100Gi
    pods: "5"

# -----------------------------------------------------------------------------
# AI Services - Higher CPU/Memory for ML workloads
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: immich
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "10"
    requests.storage: 500Gi
    pods: "15"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: ollama
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 16Gi
    limits.cpu: "8"
    limits.memory: 32Gi
    persistentvolumeclaims: "5"
    requests.storage: 100Gi
    pods: "10"

# -----------------------------------------------------------------------------
# Productivity Services - Standard limits
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: paperless-ngx
spec:
  hard:
    requests.cpu: "1"
    requests.memory: 1Gi
    limits.cpu: "2"
    limits.memory: 2Gi
    persistentvolumeclaims: "5"
    requests.storage: 50Gi
    pods: "10"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: n8n
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 10Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: mealie
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "2"
    requests.storage: 10Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: linkwarden
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 10Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: homepage
spec:
  hard:
    requests.cpu: "200m"
    requests.memory: 256Mi
    limits.cpu: "500m"
    limits.memory: 512Mi
    persistentvolumeclaims: "2"
    requests.storage: 1Gi
    pods: "5"

# -----------------------------------------------------------------------------
# Network Services - Lower limits
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: pihole
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 5Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: wireguard
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "2"
    requests.storage: 2Gi
    pods: "5"

# -----------------------------------------------------------------------------
# Development Services
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: harbor
spec:
  hard:
    requests.cpu: "2"
    requests.memory: 4Gi
    limits.cpu: "4"
    limits.memory: 8Gi
    persistentvolumeclaims: "10"
    requests.storage: 200Gi
    pods: "20"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: drone
spec:
  hard:
    requests.cpu: "1"
    requests.memory: 1Gi
    limits.cpu: "2"
    limits.memory: 2Gi
    persistentvolumeclaims: "5"
    requests.storage: 20Gi
    pods: "10"

# -----------------------------------------------------------------------------
# Content Services
# -----------------------------------------------------------------------------
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: searxng
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 5Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: calibre-web
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: 512Mi
    limits.cpu: "1"
    limits.memory: 1Gi
    persistentvolumeclaims: "3"
    requests.storage: 100Gi
    pods: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: resource-quota
  namespace: yarr
spec:
  hard:
    requests.cpu: "200m"
    requests.memory: 256Mi
    limits.cpu: "500m"
    limits.memory: 512Mi
    persistentvolumeclaims: "2"
    requests.storage: 5Gi
    pods: "3"
