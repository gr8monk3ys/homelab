apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: homelab-production

# Note: namespace override removed to preserve per-service namespaces

resources:
  - ../../base

patches:
  - path: resource-patches.yaml

labels:
  - pairs:
      environment: production
      tier: prod
    includeSelectors: false

replicas:
  # Production replicas
  - name: traefik
    count: 2
  - name: external-secrets-operator
    count: 2

images:
  # Use stable/pinned versions for production
  - name: nextcloud
    newTag: 28-apache
  - name: gitea/gitea
    newTag: 1.21.0
  - name: traefik
    newTag: v2.10.4

configMapGenerator:
  - name: homelab-config
    literals:
      - domain=homelab.local
      - timezone=America/New_York
      - environment=production
      - log_level=info
      - backup_enabled=true
      - monitoring_enabled=true
